<mvc:View
    controllerName="ns.artists.controller.Leaderboard"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:tnt="sap.tnt">

    <Page title="Artist Leaderboard" showNavButton="true" navButtonPress=".onNavHome">
        <content>
            
            <IconTabBar 
                id="genreFilter" 
                select=".onFilterGenre"
                expandable="false"
                headerBackgroundDesign="Transparent"
                class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter key="All" text="Alles" icon="sap-icon://group" />
                    <IconTabSeparator />
                    <IconTabFilter key="Techno" text="Techno" icon="sap-icon://sound-loud" />
                    <IconTabFilter key="House" text="House" icon="sap-icon://sound" />
                    <IconTabFilter key="EDM" text="EDM" icon="sap-icon://electro" />
                    <IconTabFilter key="Trance" text="Trance" icon="sap-icon://radar" />
                </items>
            </IconTabBar>

       
            <Panel expandable="true" expanded="false" headerText="Hoe werkt de Hype Meter?" width="auto" class="sapUiResponsiveMargin">
                <content>
                    <HBox alignItems="Center" wrap="Wrap">
                        <HBox alignItems="Center" class="sapUiMediumMarginEnd">
                            <core:Icon src="sap-icon://trend-up" class="sapUiTinyMarginEnd" color="#107e3e"/>
                            <Text text="Rising ( 20 reviews)" />
                        </HBox>
                        <HBox alignItems="Center" class="sapUiMediumMarginEnd">
                            <core:Icon src="sap-icon://temperature" class="sapUiTinyMarginEnd" color="#e9730c"/>
                            <Text text="Hot (20-50 reviews)" />
                        </HBox>
                        <HBox alignItems="Center">
                            <core:Icon src="sap-icon://status-critical" class="sapUiTinyMarginEnd" color="#b00"/>
                            <Text text="HYPE (> 50 reviews)" />
                        </HBox>
                    </HBox>
                </content>
            </Panel>

            <Table
                id="leaderboardTable"
                items="{
                    path: '/ArtistsLeaderboard', 
                    sorter: {
                        path: 'averageRating',
                        descending: true
                    }
                }"
                width="auto"
                class="sapUiResponsiveMargin"
                growing="true"
                growingThreshold="20">
                
                <headerToolbar>
                    <Toolbar>
                        <Title text="Ranking (Live uit Reviews)" level="H2"/>
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column width="5rem"><Text text="Act" /></Column>
                    <Column><Text text="Naam" /></Column>
                    <Column minScreenWidth="Tablet" demandPopin="true"><Text text="Genre" /></Column>
                    
                  
                    <Column width="10rem" hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
                        <Text text="Hype Meter" />
                    </Column>
                    
                    <Column hAlign="Center"><Text text="Rating" /></Column>
                </columns>

                <items>
                    <ColumnListItem type="Navigation" press=".onPress">
                        <cells>
                            <Avatar src="{imageUrl}" displaySize="XS" />
                            
                            <VBox>
                                <Title text="{name}" class="sapUiTinyMarginBottom" />
                                <tnt:InfoLabel 
                                    text="TOP RATED" 
                                    colorScheme="8" 
                                    visible="{
                                        path: 'averageRating',
                                        targetType: 'any',
                                        formatter: '.formatTopRatedVisible'
                                    }" />
                            </VBox>

                            <Text text="{genre}" />

                       
                            <HBox alignItems="Center" justifyContent="Center">
                              
                                <core:Icon 
                                    src="sap-icon://status-critical" 
                                    color="#b00" 
                                    size="1.5rem" 
                                    class="sapUiTinyMarginEnd" 
                                    visible="{
                                        path: 'reviewCount',
                                        targetType: 'any',
                                        formatter: '.formatHypeIconVisible'
                                    }" />
                                
                                <!-- HOT (Oranje Ster) -->
                                <core:Icon 
                                    src="sap-icon://temperature" 
                                    color="#e9730c" 
                                    size="1.2rem" 
                                    class="sapUiTinyMarginEnd" 
                                    visible="{
                                        path: 'reviewCount',
                                        targetType: 'any',
                                        formatter: '.formatHotIconVisible'
                                    }" />

                                <!-- RISING (Groene Pijl) -->
                                <core:Icon 
                                    src="sap-icon://trend-up" 
                                    color="#107e3e" 
                                    size="1.2rem" 
                                    class="sapUiTinyMarginEnd" 
                                    visible="{
                                        path: 'reviewCount',
                                        targetType: 'any',
                                        formatter: '.formatRisingIconVisible'
                                    }" />

                                <!-- Tekst label erachter -->
                                <ObjectStatus 
                                    text="{
                                        path: 'reviewCount',
                                        targetType: 'any',
                                        formatter: '.formatHypeText'
                                    }" 
                                    state="{
                                        path: 'reviewCount',
                                        targetType: 'any',
                                        formatter: '.formatHypeState'
                                    }" />
                            </HBox>

                            <VBox alignItems="Center">
                                <RatingIndicator 
                                    value="{averageRating}" 
                                    iconSize="16px" 
                                    maxValue="5" 
                                    editable="false" />
                                <Text text="{averageRating} / 5.0" class="sapUiTinyMarginTop" />
                            </VBox>

                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

        </content>
    </Page>
</mvc:View>