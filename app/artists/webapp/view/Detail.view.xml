<mvc:View
    controllerName="ns.artists.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core">

    <uxap:ObjectPageLayout id="ObjectPageLayout"
        showTitleInHeaderContent="true"
        showHeaderContent="true"
        showFooter="false"
        upperCaseAnchorBar="false">

        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                    <Title text="{name}" wrapping="true" level="H1"/>
                </uxap:expandedHeading>
                <uxap:snappedHeading>
                    <Title text="{name}" wrapping="true" level="H1"/>
                </uxap:snappedHeading>

                <uxap:expandedContent>
                    <Label text="{genre}"/>
                </uxap:expandedContent>
                <uxap:snappedContent>
                    <Label text="{genre}"/>
                </uxap:snappedContent>

                <uxap:content>
                    <ObjectStatus 
                        text="{label}" 
                        state="{= ${label} === 'Headliner' ? 'Warning' : 'Success' }" 
                        inverted="true" 
                        class="sapUiTinyMarginEnd"/>
                    
                     <ObjectStatus 
                        text="Top Rated" 
                        icon="sap-icon://favorite"
                        state="Success" 
                        visible="{
                            path: 'averageRating',
                            targetType: 'any',
                            formatter: '.formatTopRatedVisible'
                        }"/>
                </uxap:content>

                <uxap:navigationActions>
                    <OverflowToolbarButton type="Transparent" icon="sap-icon://nav-back" press=".onNavBack" tooltip="Terug"/>
                </uxap:navigationActions>

                <uxap:actions>
                    <Button text="Schrijf Review" type="Emphasized" press=".onOpenReviewDialog"/>
                </uxap:actions>

            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>

        <uxap:headerContent>
            <FlexBox wrap="Wrap" fitContainer="true" alignItems="Center">
                
                <f:Avatar 
                    src="{imageUrl}" 
                    displaySize="XL" 
                    displayShape="Square" 
                    class="sapUiMediumMarginEnd" />
                
                <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <Label text="Land" design="Bold"/>
                    <ObjectAttribute text="{country}"/>
                </layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <Label text="Rating" design="Bold"/>
                    <HBox alignItems="Center">
                        <RatingIndicator value="{averageRating}" iconSize="1rem" editable="false" class="sapUiTinyMarginEnd"/>
                        <Text text="({reviewCount} reviews)"/>
                    </HBox>
                </layout:VerticalLayout>

                <layout:VerticalLayout>
                    <Label text="Volg" design="Bold" class="sapUiTinyMarginBottom"/>
                    <HBox alignItems="Center">
                        <Image src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg" width="20px" height="20px" class="sapUiTinyMarginEnd"/>
                        <Link text="Spotify" href="{spotifyUrl}" target="_blank" class="sapUiMediumMarginEnd"/>
                        
                        <Image src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" width="20px" height="20px" class="sapUiTinyMarginEnd"/>
                        <Link text="Instagram" href="{instagramUrl}" target="_blank"/>
                    </HBox>
                </layout:VerticalLayout>

            </FlexBox>
        </uxap:headerContent>

        <uxap:sections>
            
            <uxap:ObjectPageSection title="Biografie">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <Text text="{biography}" class="sapUiSmallMargin"/>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection title="Shows">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                             <List items="{performances}" noDataText="Geen shows gepland.">
                                <items>
                                    <ObjectListItem 
                                        title="{stage/name}"
                                        type="Inactive"
                                        icon="sap-icon://sound-loud">
                                        <attributes>
                                            <ObjectAttribute 
                                                title="Datum" 
                                                text="{
                                                    path: 'startTime',
                                                    type: 'sap.ui.model.odata.type.DateTimeOffset',
                                                    formatOptions: {
                                                        pattern: 'EEEE d MMMM yyyy'
                                                    }
                                                }"/>
                                        </attributes>
                                        <firstStatus>
                                            <ObjectStatus 
                                                text="{path: 'startTime', type: 'sap.ui.model.odata.type.DateTimeOffset', formatOptions: { pattern: 'HH:mm' }} - {path: 'endTime', type: 'sap.ui.model.odata.type.DateTimeOffset', formatOptions: { pattern: 'HH:mm' }}" 
                                                state="None" />
                                        </firstStatus>
                                    </ObjectListItem>
                                </items>
                            </List>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection title="Reviews">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <List items="{reviews}" noDataText="Nog geen reviews.">
                                <items>
                                    <FeedListItem
                                        sender="{visitorName}"     
                                        icon="sap-icon://person-placeholder"
                                        info="Score: {rating}/5  â€¢  {title}"
                                        timestamp="{createdAt}"
                                        text="{text}"         
                                        convertLinksToAnchorTags="All"/>
                                </items>
                            </List>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

        </uxap:sections>
    </uxap:ObjectPageLayout>
</mvc:View>