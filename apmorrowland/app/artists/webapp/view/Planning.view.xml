<mvc:View
    controllerName="ns.artists.controller.Planning"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:unified="sap.ui.unified">

    <Page title="Line-up &amp; Planning" showNavButton="true" navButtonPress=".onNavHome">
        <content>
            <PlanningCalendar
                id="planningCalendar"
                startDate="{settings>/startDate}"
                rows="{
                    path: '/Stages',
                    parameters: {
                        $expand: 'performances($expand=artist)' 
                    }
                }"
                appointmentSelect=".onAppointmentSelect"
                viewKey="DayView">

                <toolbarContent>
                    <Title text="Festival Planning" titleStyle="H3"/>
                </toolbarContent>

                <views>
                    <PlanningCalendarView
                        key="DayView"
                        intervalType="Hour"
                        description="Dag"
                        intervalsS="12"
                        intervalsM="12"
                        intervalsL="12"
                        showSubIntervals="true" />

                    <PlanningCalendarView
                        key="WeekView"
                        intervalType="Day"
                        description="Week"
                        intervalsS="7"
                        intervalsM="7"
                        intervalsL="7" />

                    <PlanningCalendarView
                        key="MonthView"
                        intervalType="Day"
                        description="Maand"
                        intervalsS="31"
                        intervalsM="31"
                        intervalsL="31" />
                </views>

                <rows>
                    <PlanningCalendarRow
                        title="{name}"
                        icon="sap-icon://sound-loud"
                        enableAppointmentsDragAndDrop="true"
                        enableAppointmentsResize="true"
                        enableAppointmentsCreate="true"
                        appointmentDrop=".onAppointmentDrop"
                        appointmentResize=".onAppointmentResize"
                        appointmentCreate=".onAppointmentCreate"
                        appointments="{
                            path: 'performances',
                            templateShareable: true
                        }">
                        <appointments>
                            <unified:CalendarAppointment
                                startDate="{
                                    path: 'startTime',
                                    formatter: '.formatDate'
                                }"
                                endDate="{
                                    path: 'endTime',
                                    formatter: '.formatDate'
                                }"
                                title="{artist/name}"
                                text="{artist/genre}"
                                icon="sap-icon://customer"
                                type="{= ${day} === 'Friday' ? 'Type01' : 'Type06' }">
                            </unified:CalendarAppointment>
                        </appointments>

                    </PlanningCalendarRow>
                </rows>

            </PlanningCalendar>
        </content>
    </Page>
</mvc:View>